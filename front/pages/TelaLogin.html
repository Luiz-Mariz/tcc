<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tela Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
</head>

<body class="bg-gray-100 min-h-screen bg-cover bg-center flex flex-col" style="background-image: url('https://hyppet.com/wp-content/uploads/2024/06/11ef0df4-3b63-44b9-b638-c0e930d93bd4-e1750272550279.png'); background-size: cover; background-attachment: fixed;">
    <header class="bg-purple-800 opacity-100 p-4 fixed top-0 left-0 w-full z-50">
        <div class="container mx-auto flex justify-between items-center">
            <a class="text-white font-extrabold text-2xl sm:text-3xl md:text-4xl tracking-wide" href="index.html" aria-label="P√°gina inicial Adote BH">
                Adote<span class="text-orange-400">BH</span>
            </a>

            <nav class="hidden md:flex items-center space-x-6" aria-label="Navega√ß√£o Principal">
                <a class="text-gray-300 font-bold hover:text-white" href="TelaProcAdotar.html">Quero Adotar</a>
                <a class="text-gray-300 font-bold hover:text-white" href="TelaSejaParceiro.html">Seja Nosso Parceiro</a>
                <div id="user-profile-desktop" class="hidden items-center space-x-2">
                    <img id="user-avatar-desktop" src="" alt="Avatar do Usu√°rio"
                        class="w-8 h-8 rounded-full object-cover border-2 border-white">
                    <span id="user-name-desktop" class="text-white font-medium"></span>
                    <a href="minha-conta.html"
                        class="text-gray-200 hover:text-white font-medium transition duration-300 ease-in-out">Minha
                        Conta</a>
                    <button id="logout-button-desktop"
                        class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium shadow transition duration-300 ease-in-out">Sair</button>
                </div>
                <a id="login-button-desktop" href="TelaLogin.html"
                    class="bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded font-medium transition duration-300 ease-in-out">
                    Entrar
                </a>
            </nav>

            <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none" aria-label="Abrir menu de navega√ß√£o">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </button>
        </div>

        <nav id="mobile-menu" class="md:hidden bg-purple-700 pb-4 hidden" aria-label="Navega√ß√£o Mobile">
            <a href="TelaProcAdotar.html" class="block text-gray-200 hover:text-white px-4 py-2 text-sm transition duration-300 ease-in-out">Quero Adotar</a>
            <a href="TelaSejaParceiro.html" class="block text-gray-200 hover:text-white px-4 py-2 text-sm transition duration-300 ease-in-out">Seja Nosso Parceiro</a>
            <div id="user-profile-mobile" class="hidden flex flex-col space-y-2 mx-4 mt-2 px-4 py-2">
                <div class="flex items-center space-x-2">
                    <img id="user-avatar-mobile" src="" alt="Avatar do Usu√°rio"
                        class="w-8 h-8 rounded-full object-cover border-2 border-white">
                    <span id="user-name-mobile" class="text-white font-medium"></span>
                </div>
                <a href="minha-conta.html"
                    class="block text-gray-200 hover:text-white px-4 py-2 text-sm transition duration-300 ease-in-out">Minha
                    Conta</a>
                <button id="logout-button-mobile"
                    class="block bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium shadow transition duration-300 ease-in-out text-center">Sair</button>
            </div>
            <a id="login-button-mobile" href="TelaLogin.html"
                class="block bg-purple-600 hover:bg-purple-500 text-white mx-4 mt-2 px-4 py-2 rounded text-sm shadow transition duration-300 ease-in-out text-center">
                Entrar
            </a>
        </nav>
    </header>

    <div class="pt-16 sm:pt-20 md:pt-24 flex-grow">
        <div class="flex justify-center sm:justify-start">
            <div class="mx-auto sm:mx-20 p-4 w-full max-w-md min-h-[500px] bg-white shadow-lg rounded-lg">
                <h2 class="font-bold mb-4 text-2xl sm:text-3xl text-left">Boas-vindas ao Adote BH üê∂üòª</h2>
                <form id="formLogin" class="bg-transparent shadow-md rounded p-4" onsubmit="login()">
                    <div class="mb-4">
                        <label for="email" class="block text-gray-700 font-bold mb-2">E-mail</label>
                        <input type="email" id="email" class="w-full px-3 py-2 border rounded" required>
                    </div>
                    <div class="mb-4">
                        <label for="senha" class="block text-gray-700 font-bold mb-2">Senha</label>
                        <input type="password" id="senha" class="w-full px-3 py-2 border rounded" required>
                    </div>

                    <div class="flex justify-center mt-4">
                        <button type="submit" class="bg-purple-800 text-white px-6 py-2 rounded hover:bg-purple-600">
                            Entrar
                        </button>
                    </div>

                    <div class="flex w-full justify-start mt-4">
                        <a href="esqueci-senha.html" class="text-sm text-blue-700 hover:text-blue-700 w-full text-center">Esqueci a senha</a>
                    </div>
                    <div class="flex w-full justify-start mt-4">
                        <a href="TelaCadastroUsuario.html" class="text-blue-700 hover:text-blue-700 w-full text-center">Cadastre-se aqui</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer class="bg-purple-800 text-white py-6 mt-16 w-full">
        <div class="container mx-auto text-center">
            <p class="text-lg font-bold">Adote BH</p>
            <p class="text-sm">Ajudamos animais a encontrar um lar amoroso. Junte-se a n√≥s!</p>
            <div class="mt-4 space-x-6">
                <a href="#sobre-nos" class="text-white hover:text-orange-400">Sobre n√≥s</a>
                <a href="#termos-uso" class="text-white hover:text-orange-400">Termos de Servi√ßo</a>
                <a href="#politica-privacidade" class="text-white hover:text-orange-400">Pol√≠tica de Privacidade</a>
            </div>
            <div class="mt-4">
                <p class="text-sm">&copy; 2025 Adote BH. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="./assents/js/index.js"></script>
    <script>
        document.getElementById('mobile-menu-button').onclick = function() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        };

        // --- Configura√ß√µes da API (As mesmas das outras telas) ---
        const USER_PROFILE_API_URL = 'https://api.example.com/api/user/profile'; // <-- Substitua pelo URL real do seu backend para o perfil do usu√°rio!
        const AUTH_TOKEN_KEY = 'authToken'; // Chave para o token no localStorage

        // --- Fun√ß√µes para o Perfil do Usu√°rio (As mesmas das outras telas) ---
        async function fetchUserData() {
            try {
                const token = localStorage.getItem(AUTH_TOKEN_KEY);
                if (!token || token === 'seu_token_de_autenticacao_aqui') {
                    console.log('Nenhum token de autentica√ß√£o real encontrado ou placeholder. Usu√°rio n√£o logado.');
                    return null;
                }

                const response = await fetch(USER_PROFILE_API_URL, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (!response.ok) {
                    console.error(`Erro ao buscar dados do usu√°rio: ${response.status} ${response.statusText}`);
                    if (response.status === 401 || response.status === 403) {
                        Swal.fire({
                            title: 'Sess√£o expirada!',
                            text: 'Por favor, fa√ßa login novamente.',
                            icon: 'warning',
                            timer: 3000,
                            timerProgressBar: true,
                            showConfirmButton: false
                        }).then(() => {
                            localStorage.removeItem(AUTH_TOKEN_KEY); // Limpa token inv√°lido
                        });
                    }
                    return null;
                }

                const userData = await response.json();
                console.log('Dados do usu√°rio recebidos:', userData);

                return {
                    name: userData.nome || userData.name,
                    avatar: userData.foto_perfil || userData.profile_url || 'https://via.placeholder.com/150/d3a0e6/FFFFFF?text=User'
                };

            } catch (error) {
                console.error('Erro na requisi√ß√£o da API de perfil:', error);
                Swal.fire({
                    title: 'Erro de conex√£o!',
                    text: 'N√£o foi poss√≠vel carregar seu perfil. Tente novamente mais tarde.',
                    icon: 'error',
                    timer: 4000,
                    timerProgressBar: true,
                    showConfirmButton: false
                });
                return null;
            }
        }

        async function updateHeaderProfile() {
            const userData = await fetchUserData();

            const userProfileDesktop = document.getElementById('user-profile-desktop');
            const userNameDesktop = document.getElementById('user-name-desktop');
            const userAvatarDesktop = document.getElementById('user-avatar-desktop');
            const loginButtonDesktop = document.getElementById('login-button-desktop');
            
            let logoutButtonDesktop = document.getElementById('logout-button-desktop');
            if (!logoutButtonDesktop) {
                logoutButtonDesktop = document.createElement('button');
                logoutButtonDesktop.id = 'logout-button-desktop';
                logoutButtonDesktop.className = 'bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium shadow transition duration-300 ease-in-out';
                logoutButtonDesktop.textContent = 'Sair';
                logoutButtonDesktop.addEventListener('click', doLogout);

                const navDesktop = loginButtonDesktop.parentElement;
                const minhaContaLinkDesktop = document.createElement('a');
                minhaContaLinkDesktop.href = 'minha-conta.html';
                minhaContaLinkDesktop.className = 'text-gray-200 hover:text-white font-medium transition duration-300 ease-in-out';
                minhaContaLinkDesktop.textContent = 'Minha Conta';
                
                navDesktop.insertBefore(minhaContaLinkDesktop, loginButtonDesktop);
                navDesktop.insertBefore(logoutButtonDesktop, loginButtonDesktop);
            }

            const userProfileMobile = document.getElementById('user-profile-mobile');
            const userNameMobile = document.getElementById('user-name-mobile');
            const userAvatarMobile = document.getElementById('user-avatar-mobile');
            const loginButtonMobile = document.getElementById('login-button-mobile');
            
            let logoutButtonMobile = document.getElementById('logout-button-mobile');
            if (!logoutButtonMobile) {
                logoutButtonMobile = document.createElement('button');
                logoutButtonMobile.id = 'logout-button-mobile';
                logoutButtonMobile.className = 'block bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium shadow transition duration-300 ease-in-out text-center mt-2';
                logoutButtonMobile.textContent = 'Sair';
                logoutButtonMobile.addEventListener('click', doLogout);

                const userProfileMobileDiv = document.getElementById('user-profile-mobile');
                const minhaContaLinkMobile = document.createElement('a');
                minhaContaLinkMobile.href = 'minha-conta.html';
                minhaContaLinkMobile.className = 'block text-gray-200 hover:text-white px-4 py-2 text-sm transition duration-300 ease-in-out';
                minhaContaLinkMobile.textContent = 'Minha Conta';

                if (userProfileMobileDiv) {
                    userProfileMobileDiv.appendChild(minhaContaLinkMobile);
                    userProfileMobileDiv.appendChild(logoutButtonMobile);
                }
            }

            if (userData && userData.name && userData.avatar) {
                // Desktop
                userProfileDesktop.classList.remove('hidden');
                userProfileDesktop.classList.add('flex');
                userNameDesktop.textContent = userData.name;
                userAvatarDesktop.src = userData.avatar;
                loginButtonDesktop.classList.add('hidden');
                logoutButtonDesktop.classList.remove('hidden');

                // Mobile
                userProfileMobile.classList.remove('hidden');
                userProfileMobile.classList.add('flex', 'flex-col');
                userNameMobile.textContent = userData.name;
                userAvatarMobile.src = userData.avatar;
                loginButtonMobile.classList.add('hidden');
                logoutButtonMobile.classList.remove('hidden');
            } else {
                // Desktop
                userProfileDesktop.classList.add('hidden');
                userProfileDesktop.classList.remove('flex');
                loginButtonDesktop.classList.remove('hidden');
                logoutButtonDesktop.classList.add('hidden');

                // Mobile
                userProfileMobile.classList.add('hidden');
                userProfileMobile.classList.remove('flex', 'flex-col');
                loginButtonMobile.classList.remove('hidden');
                logoutButtonMobile.classList.add('hidden');
            }
        }

        // Fun√ß√£o de Logout (copiada e ajustada da tela "Minha Conta")
        function doLogout() {
            Swal.fire({
                title: 'Tem certeza?',
                text: "Voc√™ ser√° desconectado da sua conta.",
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#8B5CF6',
                cancelButtonColor: '#EF4444',
                confirmButtonText: 'Sim, sair!',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    localStorage.removeItem(AUTH_TOKEN_KEY); // Remove o token
                    Swal.fire(
                        'Desconectado!',
                        'Voc√™ foi desconectado com sucesso.',
                        'success'
                    ).then(() => {
                        window.location.href = 'index.html'; // Redireciona para a p√°gina inicial
                    });
                }
            });
        }

        // Chama a fun√ß√£o para atualizar o cabe√ßalho ao carregar a p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            updateHeaderProfile();
        });
    </script>
</body>
</html>